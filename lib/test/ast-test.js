"use strict";
/*
 * Copyright 2015 Google Inc. All Rights Reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *     http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
var chai_1 = require('chai');
var helper = require('./test-helper');
var bolt = require('../bolt');
var parse = bolt.parse;
var ast = require('../ast');
suite("Abstract Syntax Tree (AST)", function () {
    suite("Left Associative Operators (AND OR)", function () {
        var t = ast.boolean(true);
        var f = ast.boolean(false);
        var v = ast.variable;
        var and = ast.and;
        var or = ast.or;
        var a = v('a');
        var b = v('b');
        var c = v('c');
        var d = v('d');
        var tests = [
            { data: [],
                expect: { and: t, or: f } },
            { data: [t],
                expect: { and: t, or: t } },
            { data: [f],
                expect: { and: f, or: f } },
            { data: [f, t],
                expect: { and: f, or: t } },
            { data: [t, f],
                expect: { and: f, or: t } },
            { data: [t, f, t],
                expect: { and: f, or: t } },
            { data: [f, t, f],
                expect: { and: f, or: t } },
            { data: [a],
                expect: { and: a, or: a } },
            { data: [a, t],
                expect: { and: a, or: t } },
            { data: [a, f],
                expect: { and: f, or: a } },
            { data: [t, a],
                expect: { and: a, or: t } },
            { data: [f, a],
                expect: { and: f, or: a } },
            { data: [t, a, f],
                expect: { and: f, or: t } },
            { data: [f, a, t],
                expect: { and: f, or: t } },
            { data: [a, f, a],
                expect: { and: f, or: ast.or(a, a) } },
            { data: [a, t, a],
                expect: { and: and(a, a), or: t } },
            { data: [and(a, b), and(c, d)],
                expect: { and: and(and(and(a, b), c), d),
                    or: or(and(a, b), and(c, d)) } },
            { data: [or(a, b), or(c, d)],
                expect: { and: and(or(a, b), or(c, d)),
                    or: or(or(or(a, b), c), d) } },
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            chai_1.assert.deepEqual(ast.andArray(data), expect.and, 'AND');
            chai_1.assert.deepEqual(ast.orArray(data), expect.or, 'OR');
        }, helper.expFormat);
    });
    suite("Flatten", function () {
        var v = ast.variable;
        var and = ast.and;
        var a = v('a');
        var b = v('b');
        var c = v('c');
        var d = v('d');
        var tests = [
            { data: a,
                expect: [a] },
            { data: and(a, b),
                expect: [a, b] },
            { data: and(a, b),
                expect: [a, b] },
            { data: and(and(a, b), c),
                expect: [a, b, c] },
            { data: and(a, and(b, c)),
                expect: [a, b, c] },
            { data: and(and(a, b), and(c, d)),
                expect: [a, b, c, d] },
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            var result = ast.flatten('&&', data);
            chai_1.assert.deepEqual(result, expect);
        }, helper.expFormat);
    });
    suite("isIdentifierString", function () {
        var tests = [
            [ast.string('hi'), true],
            [ast.string('Hi'), true],
            [ast.string('a'), true],
            [ast.string('A'), true],
            [ast.string('hiThere'), true],
            [ast.string('H123'), true],
            [ast.string('$id'), true],
            [ast.string('a$id'), false],
            [ast.string('a b'), false],
            [ast.string('0H123'), false],
            [ast.boolean(true), false],
            [ast.number(123), false],
            ['hi', false],
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            var result = ast.isIdentifierStringExp(data);
            chai_1.assert.equal(result, expect);
        }, helper.expFormat);
    });
    suite("Expression decoding.", function () {
        var tests = [
            ["true"],
            ["false"],
            ["1"],
            ["(1)", '1'],
            ["1.1"],
            ["+3", "3"],
            ["-3"],
            ["0x2", "2"],
            ["\"string\"", "'string'"],
            ["'string'"],
            ["'st\\'ring'"],
            ["'st\\ring'"],
            ["'\\u000d'", "'\\r'"],
            ["/pattern/"],
            ["/pattern/i"],
            ["/pat\\/tern/i"],
            ["a"],
            ["a.b"],
            ["a.b.c"],
            ["a['b']", 'a.b'],
            ["a[b]"],
            ["a[b][c]"],
            ["a.b[c]"],
            ["a[b].c"],
            ["(a.b)[c]", "a.b[c]"],
            ["(a(b))[c]", "a(b)[c]"],
            ["a()"],
            ["a()()"],
            ["a.b()"],
            ["a().b"],
            ["a[0]()"],
            ["a()[0]"],
            ["-a"],
            ["--a"],
            ["+a", "a"],
            ["+a +b", "a + b"],
            ["-a -b", "-a - b"],
            ["-a --b", "-a - -b"],
            ["-a ---b", "-a - --b"],
            ["!a"],
            ["!!a"],
            ["!+a", '!a'],
            ["!-a"],
            ["-!a"],
            ["2 * a"],
            ["(2 * a)", '2 * a'],
            ["2 / a"],
            ["a % 2"],
            ["1 + 1"],
            ["a - 1"],
            ["a - -b"],
            ["a + b + c"],
            ["a + (b + c)"],
            ["(a + b) + c", 'a + b + c'],
            ["a + b * c"],
            ["(a + b) * c"],
            ["a < 7"],
            ["a > 7"],
            ["a <= 7"],
            ["a >= 7"],
            ["a == 3"],
            ["a != 0"],
            ["a === 3", "a == 3"],
            ["a !== 0", "a != 0"],
            ["3 * a == b"],
            ["a == 1 && b <= 2"],
            ["a == 1 || b <= 2"],
            ["a && b && c"],
            ["a || b || c"],
            ["a && b || c && d"],
            ["a ? b : c",],
            ["a || b ? c : d"],
            ["(this + ' ').test(/\d+/)"],
        ];
        helper.dataDrivenTest(tests, function (data, expect) {
            // Decode to self by default
            expect = expect || data;
            var result = parse('function f() {return ' + data + ';}');
            var exp = result.functions.f.body;
            var decode = bolt.decodeExpression(exp);
            chai_1.assert.equal(decode, expect);
        });
    });
});

//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInRlc3QvYXN0LXRlc3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IjtBQUFBOzs7Ozs7Ozs7Ozs7OztHQWNHO0FBQ0gscUJBQXFCLE1BQU0sQ0FBQyxDQUFBO0FBQzVCLElBQVksTUFBTSxXQUFNLGVBQWUsQ0FBQyxDQUFBO0FBRXhDLElBQVksSUFBSSxXQUFNLFNBQVMsQ0FBQyxDQUFBO0FBQ2hDLElBQUksS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7QUFDdkIsSUFBWSxHQUFHLFdBQU0sUUFBUSxDQUFDLENBQUE7QUFFOUIsS0FBSyxDQUFDLDRCQUE0QixFQUFFO0lBQ2xDLEtBQUssQ0FBQyxxQ0FBcUMsRUFBRTtRQUMzQyxJQUFJLENBQUMsR0FBRyxHQUFHLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzFCLElBQUksQ0FBQyxHQUFHLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDM0IsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQztRQUNyQixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO1FBQ2xCLElBQUksRUFBRSxHQUFHLEdBQUcsQ0FBQyxFQUFFLENBQUM7UUFDaEIsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQ2YsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWYsSUFBSSxLQUFLLEdBQUc7WUFDVixFQUFFLElBQUksRUFBRSxFQUFFO2dCQUNSLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNULE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNULE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDWixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ1osTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDZixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUNULE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDWixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ1osTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNaLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDWixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxDQUFDLEVBQUMsRUFBRTtZQUMzQixFQUFFLElBQUksRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLE1BQU0sRUFBRSxFQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQzNCLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2YsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFDLEVBQUU7WUFDM0IsRUFBRSxJQUFJLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDZixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsQ0FBQyxFQUFFLEVBQUUsRUFBRSxHQUFHLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxFQUFFO1lBQ3RDLEVBQUUsSUFBSSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUM7Z0JBQ2YsTUFBTSxFQUFFLEVBQUMsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLENBQUMsRUFBQyxFQUFFO1lBQ25DLEVBQUUsSUFBSSxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUM1QixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztvQkFDOUIsRUFBRSxFQUFFLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBQyxFQUFFO1lBQzFDLEVBQUUsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dCQUMxQixNQUFNLEVBQUUsRUFBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztvQkFDNUIsRUFBRSxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBQyxFQUFFO1NBQ3pDLENBQUM7UUFFRixNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxVQUFTLElBQWUsRUFBRSxNQUFXO1lBQ2hFLGFBQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO1lBQ3hELGFBQU0sQ0FBQyxTQUFTLENBQUMsR0FBRyxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxNQUFNLENBQUMsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1FBQ3ZELENBQUMsRUFBRSxNQUFNLENBQUMsU0FBUyxDQUFDLENBQUM7SUFDdkIsQ0FBQyxDQUFDLENBQUM7SUFFSCxLQUFLLENBQUMsU0FBUyxFQUFFO1FBQ2YsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDLFFBQVEsQ0FBQztRQUNyQixJQUFJLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO1FBQ2xCLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUNmLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVmLElBQUksS0FBSyxHQUFHO1lBQ1YsRUFBRSxJQUFJLEVBQUUsQ0FBQztnQkFDUCxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUMsRUFBRTtZQUNmLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUNmLE1BQU0sRUFBRSxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUNsQixFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQztnQkFDZixNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUU7WUFDbEIsRUFBRSxJQUFJLEVBQUUsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDO2dCQUN2QixNQUFNLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFO1lBQ3JCLEVBQUUsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztnQkFDdkIsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRTtZQUNyQixFQUFFLElBQUksRUFBRSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO2dC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RTtZQUNaLENBQUUsUUFBUSxDQUFFO1lBQ1osQ0FBRSxRQUFRLENBQUU7WUFDWixDQUFFLFFBQVEsQ0FBRTtZQUNaLENBQUUsU0FBUyxFQUFFLFFBQVEsQ0FBRTtZQUN2QixDQUFFLFNBQVMsRUFBRSxRQUFRLENBQUU7WUFDdkIsQ0FBRSxZQUFZLENBQUU7WUFDaEIsQ0FBRSxrQkFBa0IsQ0FBRTtZQUN0QixDQUFFLGtCQUFrQixDQUFFO1lBQ3RCLENBQUUsYUFBYSxDQUFFO1lBQ2pCLENBQUUsYUFBYSxDQUFFO1lBQ2pCLENBQUUsa0JBQWtCLENBQUU7WUFDdEIsQ0FBRSxXQUFXLEVBQUk7WUFDakIsQ0FBRSxnQkFBZ0IsQ0FBRTtZQUNwQixDQUFFLDBCQUEwQixDQUFFO1NBQy9CLENBQUM7UUFFRixNQUFNLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxVQUFTLElBQVksRUFBRSxNQUFjO1lBQ2hFLDRCQUE0QjtZQUM1QixNQUFNLEdBQUcsTUFBTSxJQUFJLElBQUksQ0FBQztZQUN4QixJQUFJLE1BQU0sR0FBRyxLQUFLLENBQUMsdUJBQXVCLEdBQUcsSUFBSSxHQUFHLElBQUksQ0FBQyxDQUFDO1lBQzFELElBQUksR0FBRyxHQUFHLE1BQU0sQ0FBQyxTQUFTLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQztZQUNsQyxJQUFJLE1BQU0sR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsR0FBRyxDQUFDLENBQUM7WUFDeEMsYUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsTUFBTSxDQUFDLENBQUM7UUFDL0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDLENBQUMsQ0FBQztBQUNMLENBQUMsQ0FBQyxDQUFDIiwiZmlsZSI6InRlc3QvYXN0LXRlc3QuanMiLCJzb3VyY2VzQ29udGVudCI6WyIvKlxyXG4gKiBDb3B5cmlnaHQgMjAxNSBHb29nbGUgSW5jLiBBbGwgUmlnaHRzIFJlc2VydmVkLlxyXG4gKlxyXG4gKiBMaWNlbnNlZCB1bmRlciB0aGUgQXBhY2hlIExpY2Vuc2UsIFZlcnNpb24gMi4wICh0aGUgXCJMaWNlbnNlXCIpO1xyXG4gKiB5b3UgbWF5IG5vdCB1c2UgdGhpcyBmaWxlIGV4Y2VwdCBpbiBjb21wbGlhbmNlIHdpdGggdGhlIExpY2Vuc2UuXHJcbiAqIFlvdSBtYXkgb2J0YWluIGEgY29weSBvZiB0aGUgTGljZW5zZSBhdFxyXG4gKlxyXG4gKiAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXHJcbiAqXHJcbiAqIFVubGVzcyByZXF1aXJlZCBieSBhcHBsaWNhYmxlIGxhdyBvciBhZ3JlZWQgdG8gaW4gd3JpdGluZywgc29mdHdhcmVcclxuICogZGlzdHJpYnV0ZWQgdW5kZXIgdGhlIExpY2Vuc2UgaXMgZGlzdHJpYnV0ZWQgb24gYW4gXCJBUyBJU1wiIEJBU0lTLFxyXG4gKiBXSVRIT1VUIFdBUlJBTlRJRVMgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZWl0aGVyIGV4cHJlc3Mgb3IgaW1wbGllZC5cclxuICogU2VlIHRoZSBMaWNlbnNlIGZvciB0aGUgc3BlY2lmaWMgbGFuZ3VhZ2UgZ292ZXJuaW5nIHBlcm1pc3Npb25zIGFuZFxyXG4gKiBsaW1pdGF0aW9ucyB1bmRlciB0aGUgTGljZW5zZS5cclxuICovXHJcbmltcG9ydCB7YXNzZXJ0fSBmcm9tICdjaGFpJztcclxuaW1wb3J0ICogYXMgaGVscGVyIGZyb20gJy4vdGVzdC1oZWxwZXInO1xyXG5cclxuaW1wb3J0ICogYXMgYm9sdCBmcm9tICcuLi9ib2x0JztcclxubGV0IHBhcnNlID0gYm9sdC5wYXJzZTtcclxuaW1wb3J0ICogYXMgYXN0IGZyb20gJy4uL2FzdCc7XHJcblxyXG5zdWl0ZShcIkFic3RyYWN0IFN5bnRheCBUcmVlIChBU1QpXCIsIGZ1bmN0aW9uKCkge1xyXG4gIHN1aXRlKFwiTGVmdCBBc3NvY2lhdGl2ZSBPcGVyYXRvcnMgKEFORCBPUilcIiwgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdCA9IGFzdC5ib29sZWFuKHRydWUpO1xyXG4gICAgdmFyIGYgPSBhc3QuYm9vbGVhbihmYWxzZSk7XHJcbiAgICB2YXIgdiA9IGFzdC52YXJpYWJsZTtcclxuICAgIHZhciBhbmQgPSBhc3QuYW5kO1xyXG4gICAgdmFyIG9yID0gYXN0Lm9yO1xyXG4gICAgdmFyIGEgPSB2KCdhJyk7XHJcbiAgICB2YXIgYiA9IHYoJ2InKTtcclxuICAgIHZhciBjID0gdignYycpO1xyXG4gICAgdmFyIGQgPSB2KCdkJyk7XHJcblxyXG4gICAgdmFyIHRlc3RzID0gW1xyXG4gICAgICB7IGRhdGE6IFtdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogdCwgb3I6IGZ9IH0sXHJcbiAgICAgIHsgZGF0YTogW3RdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogdCwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW2ZdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IGZ9IH0sXHJcbiAgICAgIHsgZGF0YTogW2YsIHRdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW3QsIGZdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW3QsIGYsIHRdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW2YsIHQsIGZdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW2FdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogYSwgb3I6IGF9IH0sXHJcbiAgICAgIHsgZGF0YTogW2EsIHRdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogYSwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW2EsIGZdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IGF9IH0sXHJcbiAgICAgIHsgZGF0YTogW3QsIGFdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogYSwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW2YsIGFdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IGF9IH0sXHJcbiAgICAgIHsgZGF0YTogW3QsIGEsIGZdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW2YsIGEsIHRdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IHR9IH0sXHJcbiAgICAgIHsgZGF0YTogW2EsIGYsIGFdLFxyXG4gICAgICAgIGV4cGVjdDoge2FuZDogZiwgb3I6IGFzdC5vcihhLCBhKX0gfSxcclxuICAgICAgeyBkYXRhOiBbYSwgdCwgYV0sXHJcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBhbmQoYSwgYSksIG9yOiB0fSB9LFxyXG4gICAgICB7IGRhdGE6IFthbmQoYSwgYiksIGFuZChjLCBkKV0sXHJcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBhbmQoYW5kKGFuZChhLCBiKSwgYyksIGQpLFxyXG4gICAgICAgICAgICAgICAgIG9yOiBvcihhbmQoYSwgYiksIGFuZChjLCBkKSl9IH0sXHJcbiAgICAgIHsgZGF0YTogW29yKGEsIGIpLCBvcihjLCBkKV0sXHJcbiAgICAgICAgZXhwZWN0OiB7YW5kOiBhbmQob3IoYSwgYiksIG9yKGMsIGQpKSxcclxuICAgICAgICAgICAgICAgICBvcjogb3Iob3Iob3IoYSwgYiksIGMpLCBkKX0gfSxcclxuICAgIF07XHJcblxyXG4gICAgaGVscGVyLmRhdGFEcml2ZW5UZXN0KHRlc3RzLCBmdW5jdGlvbihkYXRhOiBhc3QuRXhwW10sIGV4cGVjdDogYW55KSB7XHJcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwoYXN0LmFuZEFycmF5KGRhdGEpLCBleHBlY3QuYW5kLCAnQU5EJyk7XHJcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwoYXN0Lm9yQXJyYXkoZGF0YSksIGV4cGVjdC5vciwgJ09SJyk7XHJcbiAgICB9LCBoZWxwZXIuZXhwRm9ybWF0KTtcclxuICB9KTtcclxuXHJcbiAgc3VpdGUoXCJGbGF0dGVuXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIHYgPSBhc3QudmFyaWFibGU7XHJcbiAgICB2YXIgYW5kID0gYXN0LmFuZDtcclxuICAgIHZhciBhID0gdignYScpO1xyXG4gICAgdmFyIGIgPSB2KCdiJyk7XHJcbiAgICB2YXIgYyA9IHYoJ2MnKTtcclxuICAgIHZhciBkID0gdignZCcpO1xyXG5cclxuICAgIHZhciB0ZXN0cyA9IFtcclxuICAgICAgeyBkYXRhOiBhLFxyXG4gICAgICAgIGV4cGVjdDogW2FdIH0sXHJcbiAgICAgIHsgZGF0YTogYW5kKGEsIGIpLFxyXG4gICAgICAgIGV4cGVjdDogW2EsIGJdIH0sXHJcbiAgICAgIHsgZGF0YTogYW5kKGEsIGIpLFxyXG4gICAgICAgIGV4cGVjdDogW2EsIGJdIH0sXHJcbiAgICAgIHsgZGF0YTogYW5kKGFuZChhLCBiKSwgYyksXHJcbiAgICAgICAgZXhwZWN0OiBbYSwgYiwgY10gfSxcclxuICAgICAgeyBkYXRhOiBhbmQoYSwgYW5kKGIsIGMpKSxcclxuICAgICAgICBleHBlY3Q6IFthLCBiLCBjXSB9LFxyXG4gICAgICB7IGRhdGE6IGFuZChhbmQoYSwgYiksIGFuZChjLCBkKSksXHJcbiAgICAgICAgZXhwZWN0OiBbYSwgYiwgYywgZF0gfSxcclxuICAgIF07XHJcblxyXG4gICAgaGVscGVyLmRhdGFEcml2ZW5UZXN0KHRlc3RzLCBmdW5jdGlvbihkYXRhOiBhc3QuRXhwLCBleHBlY3Q6IGFzdC5FeHBbXSkge1xyXG4gICAgICB2YXIgcmVzdWx0ID0gYXN0LmZsYXR0ZW4oJyYmJywgZGF0YSk7XHJcbiAgICAgIGFzc2VydC5kZWVwRXF1YWwocmVzdWx0LCBleHBlY3QpO1xyXG4gICAgfSwgaGVscGVyLmV4cEZvcm1hdCk7XHJcbiAgfSk7XHJcblxyXG4gIHN1aXRlKFwiaXNJZGVudGlmaWVyU3RyaW5nXCIsIGZ1bmN0aW9uKCkge1xyXG4gICAgbGV0IHRlc3RzID0gW1xyXG4gICAgICBbYXN0LnN0cmluZygnaGknKSwgdHJ1ZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCdIaScpLCB0cnVlXSxcclxuICAgICAgW2FzdC5zdHJpbmcoJ2EnKSwgdHJ1ZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCdBJyksIHRydWVdLFxyXG4gICAgICBbYXN0LnN0cmluZygnaGlUaGVyZScpLCB0cnVlXSxcclxuICAgICAgW2FzdC5zdHJpbmcoJ0gxMjMnKSwgdHJ1ZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCckaWQnKSwgdHJ1ZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCdhJGlkJyksIGZhbHNlXSxcclxuICAgICAgW2FzdC5zdHJpbmcoJ2EgYicpLCBmYWxzZV0sXHJcbiAgICAgIFthc3Quc3RyaW5nKCcwSDEyMycpLCBmYWxzZV0sXHJcbiAgICAgIFthc3QuYm9vbGVhbih0cnVlKSwgZmFsc2VdLFxyXG4gICAgICBbYXN0Lm51bWJlcigxMjMpLCBmYWxzZV0sXHJcbiAgICAgIFsnaGknLCBmYWxzZV0sXHJcbiAgICBdO1xyXG5cclxuICAgIGhlbHBlci5kYXRhRHJpdmVuVGVzdCh0ZXN0cywgZnVuY3Rpb24oZGF0YTogYXN0LkV4cCwgZXhwZWN0OiBib29sZWFuKSB7XHJcbiAgICAgIHZhciByZXN1bHQgPSBhc3QuaXNJZGVudGlmaWVyU3RyaW5nRXhwKGRhdGEpO1xyXG4gICAgICBhc3NlcnQuZXF1YWwocmVzdWx0LCBleHBlY3QpO1xyXG4gICAgfSwgaGVscGVyLmV4cEZvcm1hdCk7XHJcbiAgfSk7XHJcblxyXG4gIHN1aXRlKFwiRXhwcmVzc2lvbiBkZWNvZGluZy5cIiwgZnVuY3Rpb24oKSB7XHJcbiAgICB2YXIgdGVzdHMgPSBbXHJcbiAgICAgIFsgXCJ0cnVlXCIgXSxcclxuICAgICAgWyBcImZhbHNlXCIgXSxcclxuICAgICAgWyBcIjFcIiBdLFxyXG4gICAgICBbIFwiKDEpXCIsICcxJyBdLFxyXG4gICAgICBbIFwiMS4xXCIgXSxcclxuICAgICAgWyBcIiszXCIsIFwiM1wiXSxcclxuICAgICAgWyBcIi0zXCIgXSxcclxuICAgICAgWyBcIjB4MlwiLCBcIjJcIiBdLFxyXG4gICAgICBbIFwiXFxcInN0cmluZ1xcXCJcIiwgXCInc3RyaW5nJ1wiIF0sXHJcbiAgICAgIFsgXCInc3RyaW5nJ1wiIF0sXHJcbiAgICAgIFsgXCInc3RcXFxcJ3JpbmcnXCJdLFxyXG4gICAgICBbIFwiJ3N0XFxcXHJpbmcnXCIgXSxcclxuICAgICAgWyBcIidcXFxcdTAwMGQnXCIsIFwiJ1xcXFxyJ1wiIF0sXHJcbiAgICAgIFsgXCIvcGF0dGVybi9cIiBdLFxyXG4gICAgICBbIFwiL3BhdHRlcm4vaVwiIF0sXHJcbiAgICAgIFsgXCIvcGF0XFxcXC90ZXJuL2lcIiBdLFxyXG4gICAgICBbIFwiYVwiIF0sXHJcbiAgICAgIFsgXCJhLmJcIiBdLFxyXG4gICAgICBbIFwiYS5iLmNcIiBdLFxyXG5cclxuICAgICAgWyBcImFbJ2InXVwiLCAnYS5iJyBdLFxyXG4gICAgICBbIFwiYVtiXVwiIF0sXHJcbiAgICAgIFsgXCJhW2JdW2NdXCIgXSxcclxuICAgICAgWyBcImEuYltjXVwiIF0sXHJcbiAgICAgIFsgXCJhW2JdLmNcIiBdLFxyXG4gICAgICBbIFwiKGEuYilbY11cIiwgXCJhLmJbY11cIiBdLFxyXG4gICAgICBbIFwiKGEoYikpW2NdXCIsIFwiYShiKVtjXVwiIF0sXHJcblxyXG4gICAgICBbIFwiYSgpXCIgXSxcclxuICAgICAgWyBcImEoKSgpXCIgXSxcclxuICAgICAgWyBcImEuYigpXCIgXSxcclxuICAgICAgWyBcImEoKS5iXCIgXSxcclxuICAgICAgWyBcImFbMF0oKVwiIF0sXHJcbiAgICAgIFsgXCJhKClbMF1cIiBdLFxyXG5cclxuICAgICAgWyBcIi1hXCIgXSxcclxuICAgICAgWyBcIi0tYVwiIF0sXHJcbiAgICAgIFsgXCIrYVwiLCBcImFcIl0sXHJcbiAgICAgIFsgXCIrYSArYlwiLCBcImEgKyBiXCIgXSxcclxuICAgICAgWyBcIi1hIC1iXCIsIFwiLWEgLSBiXCIgXSxcclxuICAgICAgWyBcIi1hIC0tYlwiLCBcIi1hIC0gLWJcIiBdLFxyXG4gICAgICBbIFwiLWEgLS0tYlwiLCBcIi1hIC0gLS1iXCIgXSxcclxuICAgICAgWyBcIiFhXCIgXSxcclxuICAgICAgWyBcIiEhYVwiIF0sXHJcbiAgICAgIFsgXCIhK2FcIiwgJyFhJyBdLFxyXG4gICAgICBbIFwiIS1hXCIgXSxcclxuICAgICAgWyBcIi0hYVwiIF0sXHJcbiAgICAgIFsgXCIyICogYVwiIF0sXHJcbiAgICAgIFsgXCIoMiAqIGEpXCIsICcyICogYScgXSxcclxuICAgICAgWyBcIjIgLyBhXCIgXSxcclxuICAgICAgWyBcImEgJSAyXCIgXSxcclxuICAgICAgWyBcIjEgKyAxXCIgXSxcclxuICAgICAgWyBcImEgLSAxXCIgXSxcclxuICAgICAgWyBcImEgLSAtYlwiIF0sXHJcbiAgICAgIFsgXCJhICsgYiArIGNcIiBdLFxyXG4gICAgICBbIFwiYSArIChiICsgYylcIiBdLFxyXG4gICAgICBbIFwiKGEgKyBiKSArIGNcIiwgJ2EgKyBiICsgYycgXSxcclxuICAgICAgWyBcImEgKyBiICogY1wiIF0sXHJcbiAgICAgIFsgXCIoYSArIGIpICogY1wiIF0sXHJcbiAgICAgIFsgXCJhIDwgN1wiIF0sXHJcbiAgICAgIFsgXCJhID4gN1wiIF0sXHJcbiAgICAgIFsgXCJhIDw9IDdcIiBdLFxyXG4gICAgICBbIFwiYSA+PSA3XCIgXSxcclxuICAgICAgWyBcImEgPT0gM1wiIF0sXHJcbiAgICAgIFsgXCJhICE9IDBcIiBdLFxyXG4gICAgICBbIFwiYSA9PT0gM1wiLCBcImEgPT0gM1wiIF0sXHJcbiAgICAgIFsgXCJhICE9PSAwXCIsIFwiYSAhPSAwXCIgXSxcclxuICAgICAgWyBcIjMgKiBhID09IGJcIiBdLFxyXG4gICAgICBbIFwiYSA9PSAxICYmIGIgPD0gMlwiIF0sXHJcbiAgICAgIFsgXCJhID09IDEgfHwgYiA8PSAyXCIgXSxcclxuICAgICAgWyBcImEgJiYgYiAmJiBjXCIgXSxcclxuICAgICAgWyBcImEgfHwgYiB8fCBjXCIgXSxcclxuICAgICAgWyBcImEgJiYgYiB8fCBjICYmIGRcIiBdLFxyXG4gICAgICBbIFwiYSA/IGIgOiBjXCIsICBdLFxyXG4gICAgICBbIFwiYSB8fCBiID8gYyA6IGRcIiBdLFxyXG4gICAgICBbIFwiKHRoaXMgKyAnICcpLnRlc3QoL1xcZCsvKVwiIF0sXHJcbiAgICBdO1xyXG5cclxuICAgIGhlbHBlci5kYXRhRHJpdmVuVGVzdCh0ZXN0cywgZnVuY3Rpb24oZGF0YTogc3RyaW5nLCBleHBlY3Q6IHN0cmluZykge1xyXG4gICAgICAvLyBEZWNvZGUgdG8gc2VsZiBieSBkZWZhdWx0XHJcbiAgICAgIGV4cGVjdCA9IGV4cGVjdCB8fCBkYXRhO1xyXG4gICAgICB2YXIgcmVzdWx0ID0gcGFyc2UoJ2Z1bmN0aW9uIGYoKSB7cmV0dXJuICcgKyBkYXRhICsgJzt9Jyk7XHJcbiAgICAgIHZhciBleHAgPSByZXN1bHQuZnVuY3Rpb25zLmYuYm9keTtcclxuICAgICAgdmFyIGRlY29kZSA9IGJvbHQuZGVjb2RlRXhwcmVzc2lvbihleHApO1xyXG4gICAgICBhc3NlcnQuZXF1YWwoZGVjb2RlLCBleHBlY3QpO1xyXG4gICAgfSk7XHJcbiAgfSk7XHJcbn0pO1xyXG4iXX0=
